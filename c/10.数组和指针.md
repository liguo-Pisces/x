# 数组和指针

## 数组

数组由数据类型相同的一系列元素组成。需要使用数组时，通过声明数组告诉编译器数组中内含多少元素和这些元素的类型。编译器根据这些信息正确地创建数组。普通变量可以使用的类型，数组元素都可以用。

要访问数组中的元素，通过使用数组下标数（也称为索引）表示数组中的各元素。

### 初始化数组

标量变量（scalar variable）

用以逗号分隔的值列表（用花括号括起来）来初始化数组，各值之间用逗号分隔。在逗号和值之间可以使用空格。

有时需要把数组设置为只读。这样，程序只能从数组中检索值，不能把新值写入数组。要创建只读数组，应该用const声明和初始化数组。

使用数组前必须先初始化它。与普通变量类似，在使用数组元素之前，必须先给它们赋初值。编译器使用的值是内存相应位置上的现有值，因此，读者运行该程序后的输出会与该示例不同。

C Primer Plus P279

初始化列表中的项数应与数组的大小一致。

当初始化列表中的值少于数组元素个数时，编译器会把剩余的元素都初始化为0。也就是说，如果不初始化数组，数组元素和未初始化的普通变量一样，其中储存的都是垃圾值；但是，如果部分初始化数组，剩余的元素就会被初始化为0。

### 指定初始化器（C99）

C99新增了一个新特性：指定初始化器（designated initializer）。利用该特性可以初始化指定的数组元素。

### 给数组元素赋值

声明数组后，可以借助数组下标（或索引）给数组元素赋值。

C不允许把数组作为一个单元赋给另一个数组，除初始化以外也不允许使用花括号列表的形式赋值。

### 数组边界

在使用数组时，要防止数组下标超出边界。也就是说，必须确保下标是有效的值。

编译器不会检查数组下标是否使用得当。在C标准中，使用越界下标的结果是未定义的。这意味着程序看上去可以运行，但是运行结果很奇怪，或异常中止。

C信任程序员的原则。

数组元素的编号从0开始。最好是在声明数组时使用符号常量来表示数组的大小。

### 指定数组的大小

在C99标准之前，声明数组时只能在方括号中使用整型常量表达式。所谓整型常量表达式，是由整型常量构成的表达式。sizeof表达式被视为整型常量，但是（与C++不同）const值不是。另外，表达式的值必须大于0。

```c
float a8[n]; // C99之前不允许
float a9[m]; // C99之前不允许
```

以前支持C90标准的编译器不允许后两种声明方式。而C99标准允许这样声明，这创建了一种新型数组，称为变长数组（variable-length array）或简称VLA（C11放弃了这一创新的举措，把VLA设定为可选，而不是语言必备的特性）。

C99引入变长数组主要是为了让C成为更好的数值计算语言。

## 多维数组

